@using MudBlazor
@using OpenLayers.Blazor

@namespace Ellipse.Components.Shared.Menu

<MudDrawer @bind-Open="Open" Anchor="Anchor.Left" Elevation="8" Class="@_class"
    Style="transition: transform 0.4s ease, width 0.4s ease;" Width="350px">
    <!-- Drawer Header -->
    <MudDrawerHeader
        Class="flex items-center justify-between p-4 bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-t-lg shadow">
        <MudText Typo="Typo.h5" Class="font-bold tracking-wide">
            Location Details
        </MudText>
        <MudIconButton Icon="@Icons.Material.Filled.Close" @onclick="ToggleMenuOpen" Edge="Edge.End"
            Class="text-white hover:text-gray-300 transition-colors duration-200" />
        @if (!IsList)
        {
            <MudIconButton Icon="@Icons.Material.Filled.ArrowBack" OnClick="ToggleMenuView" Edge="Edge.Start"
                Class="text-white hover:text-gray-300 transition-colors duration-200" />
        }
    </MudDrawerHeader>

    <!-- Drawer Content -->
    @if (IsList && _markers.Count > 0)
    {
          <MudList T="Marker" Class="relative">
                    @foreach (var item in _markers)
                    {
                        <MudListItem>
                        @ListItem((item, item.Properties["Routes"]))
                        </MudListItem>
                        }
                    </MudList>
    }
    else if (SelectedMarker != null)
    {
        @SingleItem((SelectedMarker, SelectedMarkerRoutes))
    }
    else {
        <MudSkeleton Animation="Animation.Wave" SkeletonType="SkeletonType.Circle" Width="350px" Class="max-h-fit"></MudSkeleton>
    }
</MudDrawer>